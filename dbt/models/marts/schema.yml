version: 2

models:
  - name: dim_users
    description: "User dimension with SCD Type 2 history tracking."
    columns:
      - name: user_id
        tests:
          - not_null
      - name: email
        tests:
          - dbt_expectations.expect_column_values_to_match_regex:
              regex: '^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$'